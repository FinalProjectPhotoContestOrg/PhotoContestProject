<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entry View - Photography Contest</title>
    <!-- Bootstrap CSS from local file -->
    <link th:href="@{/css/bootstrap.css}" href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .entry-container, .rating-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .entry-container h2 {
            margin-bottom: 20px;
        }
        .rating-container h3 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<!-- Navigation Bar -->
<nav th:replace="~{ForumForms :: navbar}"></nav>

<!-- Entry View Section -->
<div class="entry-container p-4 shadow-lg rounded bg-light" th:object="${entry}">
    <h2 class="text-center display-4 font-weight-bold mb-3" th:text="${entry.title}">Entry Title Here</h2>

    <div class="text-center mb-4">
        <img th:src="'data:image/jpeg;base64,' + ${entry.photoUrl}" alt="Sample Photo" class="img-fluid rounded shadow-sm" style="max-width: 100%; height: auto;">
    </div>

    <div class="entry-details p-3">
        <p class="lead" th:text="'Story: ' + ${entry.story}">
            <strong>Story:</strong> This is a description of the entry, highlighting the photographer's intent, techniques used, and other relevant details.
        </p>

        <p class="mb-2" th:text="'Category: ' + ${entry.contest.category}">
            <strong>Category:</strong> Landscapes
        </p>

        <p th:text="'Photographer: ' + ${entry.participant.firstName} + ' ' + ${entry.participant.lastName}">
            <strong>Submitted by:</strong> Photographer's Name
        </p>
    </div>
</div>


<!-- Rating Form Section -->
<div th:unless="${isOrganizer}" style="height: 150px"></div>
<div class="rating-container" th:if="${isOrganizer}">
    <h3 class="text-center">Rate This Entry</h3>

    <form action="#" method="POST" th:action="@{'/entries/' + ${entry.id}}" th:object="${ratingDto}">
        <div class="error" style="color: red" th:if="${#fields.hasErrors('score')}" th:errors="*{score}"></div>
        <div class="mb-3">
            <label for="score" class="form-label">Rating Score (1-10)</label>
            <input th:field="*{score}" type="number" class="form-control" id="score" name="score" min="1" max="10" required>
        </div>
        <div class="mb-3">
            <label for="comment" class="form-label">Comment</label>
            <textarea th:field="*{comment}" class="form-control" id="comment" name="comment" rows="4" placeholder="Enter your comment here..." required></textarea>
        </div>
        <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="categoryMismatch" name="categoryMismatch">
            <label th:field="*{categoryMismatch}" class="form-check-label" for="categoryMismatch">Category Mismatch</label>
        </div>
        <button type="submit" class="btn btn-primary">Submit Rating</button>
    </form>
</div>

<!-- Footer -->
<footer th:replace="~{ForumForms.html :: footer}"></footer>

<!-- Bootstrap JS -->
<script src="js/bootstrap.bundle.min.js"></script>
</body>
</html>
